

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>march_hardware &mdash; march_tutorials Melodic documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="march_tutorials Melodic documentation" href="../../index.html"/>
        <link rel="next" title="march_hardware_builder" href="march_hardware_builder.html"/>
        <link rel="prev" title="march_gait_files" href="march_gait_files.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108532843-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-108532843-1');
  </script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        <a href="../../index.html">
          <img src="../../_static/logo.png"/>
          <span>Exoskeleton Technology</span>
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/create_your_workspace.html">Create your workspace</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/create_your_workspace.html#install-ros-and-colcon">Install ROS and Colcon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/create_your_workspace.html#create-a-workspace">Create A Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/create_your_workspace.html#download-the-march-source-code">Download the march source code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/create_your_workspace.html#with-write-access">With write access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/create_your_workspace.html#without-write-access">Without write access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/create_your_workspace.html#build-your-workspace">Build your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/create_your_workspace.html#automated-script">Automated script</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Useful ROS tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../useful_ros_tools/robot_model.html">Robot model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#tf2">tf2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#urdf">urdf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#joint-state-publisher">joint_state_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#robot-state-publisher">robot_state_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#rviz">rviz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/robot_model.html#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../useful_ros_tools/ros_bag.html">ROS bag</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/ros_bag.html#recording-bags">Recording bags</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../useful_ros_tools/smach.html">SMACH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/smach.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful_ros_tools/smach.html#smach-viewer">smach_viewer</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using the March Exoskeleton</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/high_level_overview.html">High level overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/high_level_overview.html#simulation-versus-exoskeleton">Simulation versus Exoskeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/high_level_overview.html#input-device">Input Device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html">Connecting to the exoskeleton</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#preparation-before-connecting">Preparation before connecting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#running-commands-on-the-exoskeleton-computer-ssh">Running commands on the exoskeleton computer (SSH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#ros-master-uri">ROS Master URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#ros-ip">ROS IP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#add-march-network-to-hosts-file">Add March network to hosts file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/connecting_to_the_exoskeleton.html#test-ros-on-multiple-devices">Test ROS on multiple devices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html">How to airgait</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#airgait-on-the-exoskeleton-directly">Airgait on the exoskeleton directly</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#the-setup">The Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#start-up">Start up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#remote-airgait">Remote Airgait</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#id1">The Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_airgait.html#id2">Start up</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_view_live_data.html">How to view live data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_view_live_data.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_view_live_data.html#id1">rqt_multiplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_view_live_data.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/how_to_view_live_data.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/log_files.html">Log files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/log_files.html#rosbag">Rosbag</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/log_files.html#exoskeleton">Exoskeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/log_files.html#cloudstation">Cloudstation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/log_files.html#uploading-the-logs">Uploading the logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html">Using the gait generator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#the-basics">The Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#preview">Preview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#duration">Duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#velocity-markers">Velocity Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#mirroring">Mirroring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#import-export">Import/Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using_the_march_exoskeleton/using_the_gait_generator.html#publish">Publish</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/documentation.html">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html#building-locally">Building locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#clone-the-repository">Clone the repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#install-rosdoc-lite-and-sphinx">Install rosdoc_lite and Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#install-gem-and-html-proofer">Install Gem and html-proofer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#install-additional-dependencies">Install Additional dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#generate-the-html">Generate the html</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/documentation.html#browser-sync-optional">Browser sync (Optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html#deploy-with-travis">Deploy with Travis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html#add-a-new-tutorial">Add a new tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../continuous_integration/continuous_integration.html">Continuous Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../continuous_integration/continuous_integration.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous_integration/continuous_integration.html#setup">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../continuous_integration/continuous_integration.html#build-notifications">Build Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../continuous_integration/continuous_integration.html#configuring-industrial-ci">Configuring Industrial CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../continuous_integration/continuous_integration.html#running-industrial-ci">Running Industrial CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../continuous_integration/continuous_integration.html#complete-travis-configuration">Complete Travis Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../continuous_integration/continuous_integration.html#setting-up-travis-ci-on-repository">Setting up Travis CI on Repository</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html#running-the-tests-locally">Running the tests locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#running-roslint">Running roslint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#running-catkin-lint">Running catkin_lint</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html#general-guidelines-to-writing-tests">General guidelines to writing tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html#writing-your-own-tests">Writing your own tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#writing-c-unit-tests">Writing C++ unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#writing-c-node-tests">Writing C++ node tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#writing-python-unit-tests">Writing python unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/testing.html#writing-python-node-tests">Writing python node tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/add_a_new_gait.html">Add a new gait</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/add_a_new_gait.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/add_a_new_gait.html#create-new-gait-files">Create new gait files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/add_a_new_gait.html#extend-the-state-machine">Extend the state machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/add_a_new_gait.html#add-a-gait-button-to-the-developer-input-device">Add a gait button to the developer input device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/add_a_new_gait.html#add-the-gait-to-the-input-device">Add the gait to the input device</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">March Packages</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="march_gait_files.html">march_gait_files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_gait_files.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_gait_files.html#terminology">Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_gait_files.html#structure">Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_gait_files.html#clarification">Clarification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">march_hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#class-structure">Class Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-usage">Example usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ethercat">EtherCAT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ethercatmaster">EthercatMaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pdo-messages">PDO messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sdo-messages">SDO messages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#power-distribution-board">Power Distribution Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ros-api">ROS API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_hardware_builder.html">march_hardware_builder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_hardware_builder.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_hardware_builder.html#ros-api">ROS API</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_hardware_builder.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_hardware_builder.html#using-the-package">Using the package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_hardware_interface.html">march_hardware_interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="march_input_device.html">march_input_device</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_input_device.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_input_device.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#sending-messages">Sending messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#receiving-messages">Receiving messages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_input_device.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#set-correct-ubuntu-permissions">Set correct ubuntu permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#how-to-run-wired">How to run wired</a><ul>
<li class="toctree-l4"><a class="reference internal" href="march_input_device.html#upload-the-code-on-the-input-device">Upload the code on the input device</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_input_device.html#start-the-software">Start the software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#how-to-run-wireless">How to run wireless</a><ul>
<li class="toctree-l4"><a class="reference internal" href="march_input_device.html#id1">Upload the code on the input device</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_input_device.html#id2">Start the software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="march_input_device.html#how-to-add-a-gait">How to add a gait</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_launch.html">march_launch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_launch.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_launch.html#ros-api">ROS API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_launch.html#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_launch.html#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_launch.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_launch.html#adding-a-software-check">Adding a software check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="march_launch.html#add-it-to-the-ui">Add it to the UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_launch.html#creating-your-software-check">Creating your software check</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_launch.html#add-it-to-the-checkrunner">Add it to the CheckRunner</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_launch.html#creating-the-executable-optional">Creating the executable (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_launch.html#faq">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_launch.html#how-do-i-see-which-checks-exist">How do I see which checks exist?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_rqt_input_device.html">march_rqt_input_device</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_input_device.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_input_device.html#launching">Launching</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_input_device.html#ros-api">ROS API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_input_device.html#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_input_device.html#published-topics">Published Topics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_input_device.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_input_device.html#add-a-new-button">Add a new button</a><ul>
<li class="toctree-l4"><a class="reference internal" href="march_rqt_input_device.html#create-a-new-publisher">Create a new publisher</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_rqt_input_device.html#create-a-publish-function">Create a publish function</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_rqt_input_device.html#create-a-button-object">Create a button object</a></li>
<li class="toctree-l4"><a class="reference internal" href="march_rqt_input_device.html#add-it-to-the-march-button-layout">Add it to the march_button_layout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_rqt_launch_menu.html">march_rqt_launch_menu</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_launch_menu.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_launch_menu.html#ros-api">ROS API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_rqt_launch_menu.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#getting-started">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#adding-a-new-qcheckbox">Adding a new QCheckBox</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#adding-a-new-qgroupbox">Adding a new QGroupBox</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#adding-a-new-qradiobutton">Adding a new QRadioButton</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_rqt_launch_menu.html#adding-a-new-run-configuration">Adding a new run configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_safety.html">march_safety</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_safety.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_safety.html#error-severity">Error severity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#warning">Warning</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#non-fatal">Non-Fatal</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#fatal">Fatal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_safety.html#ros-api">ROS API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#published-topics">Published Topics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_safety.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#add-new-safety-rule-to-existing-safetytype">Add new safety rule to existing SafetyType</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_safety.html#create-new-safetytype">Create new SafetyType</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_shared_resources.html">march_shared_resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_shared_resources.html#overview">Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_state_machine.html">march_state_machine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_state_machine.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="march_state_machine.html#behavior">Behavior</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_state_machine.html#launch">LAUNCH</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_state_machine.html#healthy">HEALTHY</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_state_machine.html#error">ERROR</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_state_machine.html#shutdown">SHUTDOWN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_state_machine.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_state_machine.html#add-a-state-to-the-state-machine">Add a state to the state machine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="march_simulation.html">march_simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="march_simulation.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_simulation.html#ros-control">ROS Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="march_simulation.html#upload-joint-names">Upload joint names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="march_simulation.html#tutorials">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="march_simulation.html#sending-commands-through-the-action-topic">Sending commands through the action topic</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">march_tutorials</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="header-override">
          <p>
            <a href="http://projectmarch.nl">March Website</a><br/>
          </p>
        </div>
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/project-march/tutorials/blob/master/doc/march_packages/march_hardware.rst" class="fa fa-github"> Edit on GitHub</a>
        
      
    </li>
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>march_hardware</li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="march-hardware">
<span id="march-hardware-label"></span><h1>march_hardware<a class="headerlink" href="#march-hardware" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The march_hardware package is a C++ package to interact with the physical March exoskeleton.
Its goal is to provide an api for actuating the exoskeleton without knowledge of the underlying hardware.</p>
</div>
<div class="section" id="class-structure">
<h2>Class Structure<a class="headerlink" href="#class-structure" title="Permalink to this headline">¶</a></h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The <a class="reference internal" href="march_hardware_builder.html#march-hardware-builder-label"><span class="std std-ref">march_hardware_builder</span></a> can help with the class structure of the hardware package,
especially when looking at an <a class="reference external" href="https://github.com/project-march/hardware-interface/tree/develop/march_hardware_builder/robots/march4.yaml">example yaml</a>.</p>
</div>
<p>The highest level class is the MarchRobot, it contains a list of Joints which can be accessed.
Each Joint is identified by a name and optionally has an IMotionCube and TemperatureGES.
This is enough knowledge to start interacting with a MarchRobot.</p>
</div>
<div class="section" id="example-usage">
<h2>Example usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>Here is an example of the commands you can use on a MarchRobot object when it is created with the correct joints.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">MarchRobot</span> <span class="n">robot</span><span class="p">;</span>
<span class="n">robot</span><span class="o">.</span><span class="n">startEthercat</span><span class="p">();</span>
<span class="n">Joint</span> <span class="n">rightKnee</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">getJoint</span><span class="p">(</span><span class="s2">&quot;right_knee&quot;</span><span class="p">);</span>
<span class="n">rightKnee</span><span class="o">.</span><span class="n">prepareActuation</span><span class="p">();</span>
<span class="n">rightKnee</span><span class="o">.</span><span class="n">actuateRad</span><span class="p">(</span><span class="mf">0.2</span><span class="p">);</span>
<span class="nb">float</span> <span class="n">readAngle</span> <span class="o">=</span> <span class="n">rightKnee</span><span class="o">.</span><span class="n">getAngleRad</span><span class="p">();</span>
<span class="nb">float</span> <span class="n">readTemperature</span> <span class="o">=</span> <span class="n">rightKnee</span><span class="o">.</span><span class="n">getTemperature</span><span class="p">();</span>
<span class="n">robot</span><span class="o">.</span><span class="n">stopEthercat</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="ethercat">
<h2>EtherCAT<a class="headerlink" href="#ethercat" title="Permalink to this headline">¶</a></h2>
<p>EtherCAT is the fieldbus protocol used to communicate with the local hardware (‘slaves’) in the exoskeleton.
<a class="reference external" href="https://github.com/OpenEtherCATsociety/SOEM">SOEM</a> (short for Simple Open EtherCAT Master) is a C library used which provides most EtherCAT functionalities.
As said, the hardware package is mainly a class structure on top of SOEM functioning as an api for controlling the exoskeleton.
The interfaces can be roughly divided into three parts:</p>
<ul class="simple">
<li>EthercatMaster</li>
<li>PDO messages</li>
<li>SDO messages</li>
</ul>
<div class="section" id="ethercatmaster">
<h3>EthercatMaster<a class="headerlink" href="#ethercatmaster" title="Permalink to this headline">¶</a></h3>
<p>The EthercatMaster class contains the main EtherCAT functionality and the main interface with SOEM.
EtherCAT can be started and stopped via the EthercatMaster.
When EtherCAT is started, a parallel thread is started that continuously sends and receives the latest EtherCAT PDO data and monitors if all slaves are still present and operational.
When EtherCAT is stopped, this parallel thread stops running.</p>
<p>The EthercatMaster class expects several arguments in its constructor: a pointer to a vector of Joints of the robot, the network interface name (ifname) of your device, the number of EtherCAT slaves in  your robot, and the cycle time of the EtherCAT thread in milliseconds. An example is provided below.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">EthercatMaster</span> <span class="n">ethercat</span><span class="p">(</span><span class="o">&amp;</span><span class="n">jointList</span><span class="p">,</span> <span class="s2">&quot;enp2s0&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="o">//</span> <span class="mi">14</span> <span class="n">slaves</span><span class="p">,</span> <span class="mi">2</span> <span class="n">ms</span> <span class="n">cycle</span> <span class="n">time</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Find out the ifname of your device by running <code class="code docutils literal"><span class="pre">ifconfig</span></code> in a terminal.</p>
</div>
</div>
<div class="section" id="pdo-messages">
<h3>PDO messages<a class="headerlink" href="#pdo-messages" title="Permalink to this headline">¶</a></h3>
<p>Process Data Objects (PDOs) are the cyclic and continuous type of messages of EtherCAT, and the main form of exchanging data with the slaves.
Reading and writing EtherCAT PDO messages is possible through the other classes in the march_hardware package (e.g. Joint, IMotionCube, Encoder, PowerDistributionBoard).
For example, the <a class="reference external" href="https://github.com/project-march/hardware-interface/tree/develop/march_hardware/src/Encoder.cpp">Encoder class</a> <code class="docutils literal"><span class="pre">getAngleIU()</span></code> function reads and returns the latest encoder value that was received by the EthercatMaster.
Functions such as <code class="docutils literal"><span class="pre">getAngleIU()</span></code> all call the same generic functions for reading from and writing to slaves.
These generic functions are defined in <a class="reference external" href="https://github.com/project-march/hardware-interface/tree/develop/march_hardware/src/EtherCAT/EthercatIO.cpp">EthercatIO.cpp</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When reading or writing PDO messages over EtherCAT via SOEM, you need three things:</p>
<ul class="simple">
<li>The index of the slave you want to read from or write to.</li>
<li>The amount of bytes you want to read or write.</li>
<li>The byte offset of the data you want to read or write for a particular slave.</li>
</ul>
<p class="last">The byte offsets need to correspond with how the slave is configured. For GES and PDB slaves, this is stored in the EEPROM of the slave.
For the IMotionCube, this is configurable during startup through a process called PDO mapping.</p>
</div>
</div>
<div class="section" id="sdo-messages">
<h3>SDO messages<a class="headerlink" href="#sdo-messages" title="Permalink to this headline">¶</a></h3>
<p>Service Data Objects (SDOs) are non-cyclic EtherCAT messages. They are used for sending one-time messages, for example when initializing an IMotionCube.
The generic SDO messaging functions can be found in <a class="reference external" href="https://github.com/project-march/hardware-interface/tree/develop/march_hardware/src/EtherCAT/EthercatSDO.cpp">EthercatSDO.cpp</a>.</p>
</div>
</div>
<div class="section" id="power-distribution-board">
<h2>Power Distribution Board<a class="headerlink" href="#power-distribution-board" title="Permalink to this headline">¶</a></h2>
<p>The PowerDistributionBoard class contains all functionality for communicating with the Power Distribution Board over EtherCAT.
For example, high voltage nets can be turned on and off via this class, and the currents that the Power Distribution Board measures can be read.
The PowerDistributionBoard class contains a HighVoltage and a LowVoltage class which contain methods for controlling the high voltage and low voltage nets.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">PowerDistributionBoard</span> <span class="n">pdb</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">readCurrent</span> <span class="o">=</span> <span class="n">pdb</span><span class="o">.</span><span class="n">getPowerDistributionBoardCurrent</span><span class="p">();</span>
<span class="n">pdb</span><span class="o">.</span><span class="n">getHighVoltage</span><span class="p">()</span><span class="o">.</span><span class="n">setNetOnOff</span><span class="p">(</span><span class="n">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="o">//</span> <span class="n">Turn</span> <span class="n">on</span> <span class="n">net</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The PowerDistributionBoard constructor requires EtherCAT byte offsets as arguments.
These need to be specified in the robot description yaml files of the hardware_builder package.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The functionality of the PowerDistributionBoard is highly dependent on the software running on the LPC1768 of the Power Distribution Board.
See the <a class="reference external" href="https://github.com/project-march/ethercat-slaves/tree/develop/pdb-slave/MARCH4-PDB">ethercat-slaves repository</a> for the LPC1768 code.</p>
</div>
</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<p>Because safety is very important, the march_hardware package will throw an exception whenever it encounters something that shouldn’t happen.</p>
<p>The main exceptions are</p>
<blockquote>
<div><ul class="simple">
<li>Incorrect configuration of joints (e.g. higher min position than max position)</li>
<li>Hardware failures</li>
<li>Incorrect actuate command is send (outside of limits or too far from current position)</li>
</ul>
</div></blockquote>
<p>When such an exception occurs, the high voltage is turned off and the exoskeleton will stop moving.</p>
</div>
<div class="section" id="ros-api">
<h2>ROS API<a class="headerlink" href="#ros-api" title="Permalink to this headline">¶</a></h2>
<p>The hardware package is written without depending on ROS to ensure that it can remain functional even when ROS will no longer be used.
The package does depend on ROS for logging, but that can be easily changed if needed.</p>
</div>
</div>


            
            <div class="admonition note">
              <p class="first admonition-title">Open Source Feedback</p>
              <p class="last">See something that needs improvement? Please open a pull request on this <a href="https://github.com/project-march/tutorials/blob/master/doc/march_packages/march_hardware.rst" class="fa fa-github"> GitHub page</a></p>
            </div>
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="march_hardware_builder.html" class="btn btn-neutral float-right" title="march_hardware_builder" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="march_gait_files.html" class="btn btn-neutral" title="march_gait_files" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'Melodic',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>